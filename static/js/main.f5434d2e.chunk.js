(this.webpackJsonpinsta_stat=this.webpackJsonpinsta_stat||[]).push([[0],{11:function(e,t,n){e.exports=n(18)},18:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),r=n(9),c=n.n(r),o=n(1),i=n(2),u=n(4),d=n(3),l=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={username:""},s}return Object(i.a)(n,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("div",{className:"card"},a.a.createElement("div",{className:"card-body"},a.a.createElement("h5",{className:"card-title"},this.props.userId),a.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},this.props.userAccessToken),a.a.createElement("p",{className:"card-text"},"Stay Hungry, Stay Foolish"))))}}]),n}(s.Component),g=n(5),h={instagramAppId:"534548134144297",instagramSecret:"59b380e96bbb3de5f48ce4438c1916f9",redirectUri:"https://tantrojan.github.io/"},m=n(10),p=n.n(m),b=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={instagramAppId:h.instagramAppId,instagramSecret:h.instagramSecret,redirectUri:h.redirectUri,userId:"",userAccessToken:""},s.authenticateUser=s.authenticateUser.bind(Object(g.a)(s)),s.getUserAccessToken=s.getUserAccessToken.bind(Object(g.a)(s)),s.getUserCode=s.getUserCode.bind(Object(g.a)(s)),s.authenticateUser(),s}return Object(i.a)(n,[{key:"authenticateUser",value:function(){var e=this,t=window.localStorage.getItem("userAccessToken"),n=window.localStorage.getItem("userId");fetch("https://graph.instagram.com/"+n+"?fields=id,username&access_token="+t).then((function(e){return new Promise((function(t,n){200===e.status&&t(e.json()),n(new Error("Couldn't Log In"))}))})).then((function(s){e.setState({userId:n,userAccessToken:t}),e.props.changeLoggedstate()})).catch((function(t){console.log(t);var n=new URLSearchParams(window.location.search).get("code");null!==n&&e.getUserAccessToken(n)}))}},{key:"getUserAccessToken",value:function(e){var t=this,n={client_id:this.state.instagramAppId,client_secret:this.state.instagramSecret,grant_type:"authorization_code",redirect_uri:this.state.redirectUri,code:e};fetch("https://api.instagram.com/oauth/access_token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:p.a.stringify(n)}).then((function(e){return new Promise((function(t,n){200===e.status?t(e.json()):n(new Error("userAccessToken couldn't be fetched"))}))})).then((function(e){console.log(e),t.setState({userId:e.user_id,userAccessToken:e.access_token}),t.props.changeLoggedstate(),window.localStorage.setItem("userAccessToken",e.access_token),window.localStorage.setItem("userId",e.user_id)})).catch((function(e){console.log(e)}))}},{key:"getUserCode",value:function(){var e=new XMLHttpRequest;console.log("Inside getUserAccessToken");var t="https://api.instagram.com/oauth/authorize?client_id="+this.state.instagramAppId+"&redirect_uri="+this.state.redirectUri+"&scope=user_profile,user_media&response_type=code";e.addEventListener("load",(function(){console.log(e.responseURL),window.location.replace(e.responseURL)})),e.open("GET",t),e.send()}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("button",{type:"button",onClick:this.getUserCode.bind(this),className:"btn btn-primary"},"Give Authorization"))}}]),n}(s.Component),f=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={userId:"",userAccessToken:"",loggedIn:!1},s}return Object(i.a)(n,[{key:"changeLoggedstate",value:function(){this.setState({loggedIn:!0,userAccessToken:window.localStorage.getItem("userAccessToken"),userId:window.localStorage.getItem("userId")})}},{key:"render",value:function(){var e;return e=!1===this.state.loggedIn?a.a.createElement(b,{changeLoggedstate:this.changeLoggedstate.bind(this)}):a.a.createElement(l,{userId:this.state.userId,userAccessToken:this.state.userAccessToken}),a.a.createElement("div",{className:"container"},e)}}]),n}(s.Component);c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(f,null)),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.f5434d2e.chunk.js.map